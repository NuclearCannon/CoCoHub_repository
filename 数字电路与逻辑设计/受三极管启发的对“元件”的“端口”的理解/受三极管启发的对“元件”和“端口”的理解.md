# 受三极管启发的对“元件”和“端口”的理解

## 提出这个模型的意义

电路几乎总是处于一种稳态。如果这种稳态被打破（比如断开一条支路，接入一个电源），电路就要从这种不稳态开始，经过一系列的变化，转化为或者趋近于稳态。

虽然在很多电路（如纯电阻电路）中，很容易通过电路理论的知识分析处稳态时各个支路的电流，但是如果要对一个行为逻辑复杂且输入经常变动的元件（如三极管，逻辑门）有更深的理解（关键在于要能算），那么就需要研究这个元件是如何让电路从一种不稳态走向新的稳态的。

（实际上就是我没学明白三极管，试图找一个我能理解的方式来编码三极管的行为逻辑而已）

## 端口的本质

当我们拿着一个“端口”（比如，三极管图（课本P75 图3.25 (a)）$c$端的输入电压$V_{CC}=20\mathrm{V}$，或者$e$端的地线）时，我们就需要理解这样的一个端口，将其整合到已有的认知体系中来，允许自己将端口作为电路的一部分进行计算。可是这样的一个端口究竟如何表示？对于上面两者，这当然是很容易的，因为前者就是$\varphi=20\mathrm{V}$，后者就是$\varphi=0\mathrm{V}$。但是站在三极管的角度考虑一下，其$c$端电压$v_c$可不是$20\mathrm{V}$，而是$v_c=V_{CC}-R_ci_c$，是与$i_c$关联的。三极管$c$端所面向的这一端口的电压是会随着电流变化而变化的。任意一个端口实际上都有其$u-i$曲线，除了电流源的端口之外，基本都可以用$\varphi(i)$表示。我们不妨做这样一个假设：对于任意的端口，$\frac{\mathrm d\varphi(i)}{\mathrm di}\le 0$。这很容易理解：你越是从这个端口中汲取电流，这个端口再给你供应电流就会更困难。实际电源提供的端口往往都是如此。



## 拉取/推出

### 拉取和推出的定义

首先我们取一个NPN三极管：

<img src="images\NPN三极管.png" style="zoom:50%;" />

为了叙述方便，我们暂时不把$v_b$看作是统一的，而是把其靠近外接端口的一端的电压记为$v_{b1}$，靠近三极管的一端的电压记为$v_{b2}$，前者即是一个“端口”。

我们可以想象：如果我们突然把这个三极管接入电路时，且$v_{b1}|_{i_b=0}>V_{TH}$，会发生什么？

我们首先要明确一点：元件能感受和操纵的，都是最靠近元件处的那一点的电压。

首先，在导线上，$v_{b1}$的提高注定导致$v_{b2}$的提高。三极管会发现在某一时刻$v_{b2}>V_{TH}$，于是，大量来自$e$极的电子朝$b$极靠近（当然大部分是去了$c$极，但是我们先不关注这一点），在电路图上相当于电子聚集到了$v_{b2}$所表示的这一点，使得$v_{b2}$下降；于是$v_{b1}>v_{b2}$，于是导线中形成了电流……久而久之，$i_b$增大，$v_{b1}(i_b)$减小，$v_{b2}\to V_{TH}$。

我们可以把元件向某个特定端口集中电子，以试图降低这一处的电势并提高这一处的输入电流（或降低输出电流）的行为称为**拉取**（可以理解为拉取电流或者拉取正电荷）。当然，相应地，还有**推出**（即抽走这里的电子，或者说拉取方向相反的电流）。拉取和推出，是电路元件对外界变化做出反应的不可再分的动作之一，元件正是通过这种方式来调节各端的电流的。

### 拉取和推出的代码表示

拉取和推出是没有额度的，而是在满足一定条件下就会一直执行。所以，我们在描述一个元件的行为逻辑时，可以模仿编程的代码，使用这样的语句：

```c
while(条件)语句;
```

或者

```c
while(条件)
{
	语句1;
	语句2;
	语句3;
	......
}
```

意即：只要条件满足，不断地执行语句（或语句块），直到条件不再满足为止。

然后我们再定义拉取和推出如何写作语句：在端口$b$拉取可以写作`b--`，表示试图降低电势。在端口$c$推出可以写作`c++`，表示试图提高电势。

## 三极管的行为逻辑

在定义了拉取这一基本动作之后，我们可以表示三极管的行为逻辑：

1. 试图保持$v_b=V_{TH}$
   1. 如果$v_b>V_{TH}$，在$b$端拉取，直到$v_b=V_{TH}$（已假设$v_b$会随$i_b$增加而减少）
   2. 如果$v_b<V_{TH}$且$i_b>0$，在$b$端推出，直到$v_b=V_{TH}$或$i_b=0$

2. 试图保证$i_c\to\beta i_b$
   1. 如果$i_c<\beta i_b$且$v_c>v_b$，在$c$端拉取，直到$i_c=\beta i_b$或$v_c\le v_b$（已假设$v_c$会随$i_c$增加而减少）
   2. 如果$i_c>\beta i_b$，在$c$端推出，直到$i_c=\beta i_b$


这四条语句不断执行，就完成了三极管的功能。

写成代码：

```c++
while(1)
{
    while(v_b>V_TH)b--;
    while(v_b<V_TH and i_b>0)b++;
    while(i_c<beta*i_b and v_c>v_b)c--;
    while(i_c>beta*i_b)c++;
}
```

需要注明的是：

- 从$b$端拉取更多电流并不是简单地令$i_b$增加或者使$v_b$减小，而是朝$b$端集中更多电子，而这往往会导致$i_b$增加和$v_b$减小。其他同理。
- 如果内层的某个循环陷入死循环，那么某个端电荷将不断累积，最终超出元件的负荷，电路进入病态。
- 上面的程序忽略了$e$端

## 用拉取的说法来解释其他元件

对于二端的元件，电动势往往可以更方便地解释它们的行为

- 电压源（电池）：$\varepsilon(i)=\varepsilon_0$
- 电流源：$\varepsilon(i)=+\infty\cdot(i-i_0)$
- 电阻：电动势$\varepsilon(i)=-Ri$

所有二端元件的行为逻辑都可以描述为：如果其两端电压不等于其电动势，那么从电压太高的一端拉取，向电压太低的一端推出，最终使得两端电压等于其电动势。如果一直拉取/推出也不能使得元件的两端电压等于其电动势，则电路就是陷入了病态（电压源的短路和电流源的断路）